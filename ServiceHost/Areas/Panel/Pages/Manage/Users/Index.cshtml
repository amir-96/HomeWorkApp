@page
@using Domain.BaseModels
@model ServiceHost.Areas.Panel.Pages.Manage.Users.IndexModel
@{
  ViewData["Title"] = "مدیریت کاربران";
}

<div class="container w-full mx-auto px-2 mt-4">

  <div class="flex items-center gap-3 text-gray-700 mb-12">
    <p class="text-xl font-semibold">
      مدیریت کاربران
    </p>
    <p class="text-sm px-2 bg-blue-200 rounded-full">
      @Model.Users.Count کاربر
    </p>
  </div>

  <a class="p-2 px-5 bg-blue-600 hover:bg-blue-500 text-white text-lg rounded shdadow text-center w-fit" asp-area="Panel" asp-page="/Manage/Users/AddUser">
      افزودن کاربر
  </a>

  <!--Card-->

  <div id="recipients" class="p-8 mt-6 rounded shadow bg-white">
    <table id="example"
           class="stripe hover"
           style="width: 100%; padding-top: 1em; padding-bottom: 1em; text-align: center !important;">
      <thead>
        <tr>
          <th data-priority="1">نام</th>
          <th data-priority="2">ایمیل</th>
          <th data-priority="3">شماره تماس</th>
          <th data-priority="4">نقش</th>
          <th data-priority="5">تنظیمات</th>
        </tr>
      </thead>
      <tbody>
        @foreach (var user in Model.Users)
        {
          <tr>
            <td>
              <div class="flex items-center justify-center gap-2 text-center">
                <img class="w-8 h-8 rounded-full ring-1 ring-lime-400" src="~/images/default.png" alt="" />
                <p>
                  @user.FirstName @user.LastName
                </p>
              </div>
            </td>
            <td>@user.Email</td>
            <td>@user.PhoneNumber</td>
            <td>
              @if (@user.Role == Roles.Admin)
              {
                <p>مدیر</p>
              }
              else if (@user.Role == Roles.Teacher)
              {
                <p>استاد</p>
              }
              else if (@user.Role == Roles.Student)
              {
                <p>دانشجو</p>
              }
              else
              {
                <p>نامشخص</p>
              }
            </td>
            <td>
              <div class="flex items-center justify-center gap-2 text-sm-center">
                <a href="#"><p class="p-1 bg-yellow-400 rounded w-16">ویرایش</p></a>
                <a href="#"><p class="p-1 bg-red-400 rounded w-16">حذف</p></a>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  <!--/Card-->
</div>

@section Scripts {
  <script>
    $(document).ready(function () {
      var table = $("#example").DataTable({
        responsive: true,
        language: {
          search: "جستجو: ",
          lengthMenu: "نمایش _MENU_ ورودی",
          info: "نمایش _START_ عدد _END_ از _TOTAL_ ورودی",
          infoEmpty: "نمایش 0 عدد 0 از 0 ورودی",
          infoFiltered: "(فیلتر شده از _MAX_ ورودی)",
          paginate: {
            first: "اولین",
            previous: "قبلی",
            next: "بعدی",
            last: "آخرین",
          },
        },
        columns: [
          { searchable: true, orderable: true },
          { searchable: true, orderable: true },
          { searchable: false, orderable: false },
          { searchable: false, orderable: false },
          { searchable: false, orderable: false },
        ],
        initComplete: function () {
          var api = this.api();
          api.on("draw", function () {
            if (api.rows({ search: "applied" }).data().length === 0) {
              $(".dataTables_empty").text("اطلاعاتی برای نمایش پیدا نشد");
            }
          });
        },
      })
        .columns.adjust()
        .responsive.recalc();
    });

  </script>
}